import{d as y,q as v,m as b,o as t,c as r,b as f,w as k,g as d,F as P,r as $,i as T,J as C,n as A,h,a5 as N,a as E,z as M,v as w,a7 as q,e as j,_ as I,f as R,O as D,P as F,Y as H,t as U,T as x}from"./app-LoprukbN.js";import{_ as J}from"./SakuraDate.vue_vue_type_script_setup_true_lang-BwxUk5J0.js";import{_ as W}from"./SakuraImageCard-DzFsZtSC.js";const Y={class:"pagination"},G=h("div",{"i-ri-arrow-left-s-line":""},null,-1),K=h("div",{"i-ri-arrow-right-s-line":""},null,-1),Q=y({__name:"ValaxyPagination",props:{curPage:{},total:{},pageSize:{}},emits:["pageChange"],setup(_,{emit:l}){const e=_,i=l,c=v(()=>Math.ceil(e.total/e.pageSize)),u=v(()=>e.curPage===1||e.curPage===c.value?3:2);function m(a){return a===1||a===c.value?!0:a>e.curPage-u.value&&a<e.curPage+u.value}function g(a){return i("pageChange",a),a===1?"/":`/page/${a}`}return(a,p)=>{const s=b("RouterLink");return t(),r("nav",Y,[a.curPage!==1?(t(),f(s,{key:0,class:"page-number",to:g(a.curPage-1),"aria-label":"prev"},{default:k(()=>[G]),_:1},8,["to"])):d("v-if",!0),(t(!0),r(P,null,$(c.value,n=>(t(),r(P,null,[m(n)?(t(),f(s,{key:n,class:A(["page-number",a.curPage===n&&"active"]),to:g(n)},{default:k(()=>[T(C(n),1)]),_:2},1032,["class","to"])):n===a.curPage-u.value?(t(),r("span",{key:`prev-space-${n}`,class:"space",disabled:""}," ... ")):n===a.curPage+u.value?(t(),r("span",{key:`next-space-${n}`,class:"space",disabled:""}," ... ")):d("v-if",!0)],64))),256)),a.curPage!==c.value?(t(),f(s,{key:1,class:"page-number",to:g(a.curPage+1),"aria-label":"next"},{default:k(()=>[K]),_:1},8,["to"])):d("v-if",!0)])}}}),X={class:"load-more-container flex justify-center mt-20 mb-17"},Z={key:1,class:"text-center"},ee=y({__name:"SakuraPagination",props:{total:{},pageSize:{}},setup(_){const l=_,e=N(),i=E(),c=M(Math.ceil(l.total/l.pageSize));function u(){var p,s,n;e.loadMultiple<c.value&&(e.loadMultiple+=1,((p=i.value.pagination)!=null&&p.animation||(n=(s=i.value.pagination)==null?void 0:s.infiniteScrollOptions)!=null&&n.preload)&&g())}function m(p,s){p.forEach(n=>{var o,L,S;n.isIntersecting&&!n.target.classList.contains("element-slide-fade-in")&&((o=i.value.pagination)!=null&&o.animation&&n.target.classList.add("element-slide-fade-in"),e.paginationElementPositionsNumber+=1,e.paginationElementPositionsNumber===e.paginationTargets.length-1&&((S=(L=i.value.pagination)==null?void 0:L.infiniteScrollOptions)!=null&&S.preload)&&u())})}function g(){setTimeout(()=>{var p;e.paginationTargets=Array.from(document.querySelectorAll(".article-card"));for(let s=0;s<e.paginationTargets.length;s++)s>=e.paginationElementPositionsNumber&&((p=i.value.pagination)!=null&&p.animation&&e.paginationTargets[s].classList.add("op-0"),e.paginationObserver.observe(e.paginationTargets[s]))},0)}function a(){e.paginationTargets.forEach(p=>{var s;(s=e.paginationObserver)==null||s.unobserve(p)})}return w(()=>{var p,s,n,o;((p=i.value.pagination)!=null&&p.animation||(n=(s=i.value.pagination)==null?void 0:s.infiniteScrollOptions)!=null&&n.preload)&&(e.paginationTargets.length===0&&(e.paginationObserver=new IntersectionObserver(m,{threshold:((o=i.value.pagination.infiniteScrollOptions)==null?void 0:o.threshold)??.01})),g())}),q(()=>{a()}),(p,s)=>(t(),r("nav",X,[j(e).loadMultiple<c.value?(t(),r("button",{key:0,class:"load-more-button px-8 py-2",onClick:u}," Previous ")):(t(),r("div",Z," 很高兴你翻到这里，但是真的没有了... "))]))}}),te={class:"tags"},ae={key:0,class:"mr-1","i-mdi-tag-multiple":""},se={key:1,class:"mx-1 non-hoverable"},ne=y({__name:"SakuraPostTags",props:{tags:{}},setup(_){return(l,e)=>{const i=b("RouterLink");return t(),r("div",te,[(t(!0),r(P,null,$(l.tags,(c,u)=>(t(),f(i,{key:c,to:{path:"/tags/",query:{tag:c}},class:"inline-flex items-center align-top"},{default:k(()=>[u===0?(t(),r("div",ae)):d("v-if",!0),u>0?(t(),r("span",se,"·")):d("v-if",!0),T(" "+C(c),1)]),_:2},1032,["to"]))),128))])}}}),oe=I(ne,[["__scopeId","data-v-1a9f2360"]]),ie={class:"categories"},re={key:0,class:"mr-1","i-mdi-folder-open-outline":""},le={key:1,class:"mx-1"},ce=y({__name:"SakuraPostCategories",props:{categories:{}},setup(_){const l=_,e=v(()=>typeof l.categories=="string"?[l.categories]:l.categories);return(i,c)=>{const u=b("RouterLink");return t(),r("div",ie,[(t(!0),r(P,null,$(e.value,(m,g)=>(t(),f(u,{key:g,to:{path:"/categories",query:{category:Array.isArray(i.categories)?i.categories.join("/"):i.categories}},class:"inline-flex items-center align-top"},{default:k(()=>[g===0?(t(),r("div",re)):d("v-if",!0),g>0?(t(),r("span",le,"/")):d("v-if",!0),T(" "+C(m),1)]),_:2},1032,["to"]))),128))])}}}),ue=I(ce,[["__scopeId","data-v-956a393c"]]),pe=_=>(D("data-v-318cae4a"),_=_(),F(),_),ge={class:"m-4"},de={class:"font-secondary","inline-flex":"","items-center":""},_e=pe(()=>h("div",{"i-mdi:clock-outline":"",class:"mr-1"},null,-1)),me={class:"title my-2"},fe=["innerHTML"],ve={class:"inline-flex"},he=y({__name:"SakuraArticleCard",props:{post:{},imagePosition:{type:Boolean}},setup(_){const l=M(!0);return w(()=>{l.value=!1}),(e,i)=>{const c=W,u=J,m=b("RouterLink"),g=ue,a=oe;return l.value?d("v-if",!0):(t(),r("article",{key:0,class:A(e.imagePosition&&e.post.cover&&"flex-row-reverse"||e.post.cover&&"md:text-right")},[e.post.cover?(t(),f(c,{key:0,class:"<md:rounded-3 h-230px md:w-430px",to:e.post.path,src:e.post.cover,rotate:"5",space:"1.1","transition-duration":"0.45s"},null,8,["to","src"])):d("v-if",!0),h("div",ge,[h("div",de,[_e,T(" 发布于 "),R(u,{date:e.post.date},null,8,["date"])]),R(m,{to:e.post.path||"","aria-label":`Read more about ${e.post.title}`},{default:k(()=>[h("div",me,C(e.post.title),1),h("div",{class:"mb-3 text-[var(--st-c-text-secondary)] dark:text-[var(--st-c-text-secondary)]",innerHTML:e.post.excerpt},null,8,fe)]),_:1},8,["to","aria-label"]),h("div",ve,[e.post.categories?(t(),f(g,{key:0,class:"font-secondary mr-3",categories:e.post.categories},null,8,["categories"])):d("v-if",!0),e.post.tags?(t(),f(a,{key:1,class:"font-secondary",tags:e.post.tags},null,8,["tags"])):d("v-if",!0)])])],2))}}}),ke=I(he,[["__scopeId","data-v-318cae4a"]]),ye={key:0},$e=y({__name:"SakuraPostList",props:{type:{},posts:{},curPage:{default:1}},setup(_){const l=_,e=H(),i=U(),c=E(),u=N(),m=v(()=>{var o;return((o=c.value.pagination)==null?void 0:o.itemsPerPage)||i.value.pageSize}),g=v(()=>{var o;return((o=c.value.pagination)==null?void 0:o.type)||"infinite-scroll"}),a=v(()=>(l.posts||e.postList).filter(o=>!o.hide)),p=v(()=>a.value.slice((l.curPage-1)*m.value,l.curPage*m.value*u.loadMultiple)),s=v(()=>p.value.map(o=>o.tags&&o.tags.length>3?{...o,tags:o.tags.slice(0,3)}:o)),n=M(!0);return w(()=>{n.value=!1}),(o,L)=>{const S=ke,V=ee,B=Q;return n.value?d("v-if",!0):(t(),r("div",ye,[(t(!0),r(P,null,$(s.value,(z,O)=>(t(),f(x,{key:z.path,name:"fade"},{default:k(()=>[z?(t(),f(S,{key:0,id:`article-card-${O}`,class:"article-card","image-position":O%2===1,post:z},null,8,["id","image-position","post"])):d("v-if",!0)]),_:2},1024))),128)),g.value==="infinite-scroll"?(t(),f(V,{key:0,"page-size":m.value,total:a.value.length},null,8,["page-size","total"])):d("v-if",!0),g.value==="pagination"?(t(),f(B,{key:1,"cur-page":o.curPage,"page-size":m.value,total:a.value.length},null,8,["cur-page","page-size","total"])):d("v-if",!0)]))}}});export{$e as _};
