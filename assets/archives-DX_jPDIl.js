import{d as B,y as D,z as x,R as E,q as O,m as V,o as a,c as i,h as v,J as d,e as l,F as C,r as M,b as N,w as _,S as P,n as R,U as b,g as S,f as g,i as T,V as F,W as I,X as J,Y as z,Z as W,$ as q,a0 as G,Q as H}from"./app-LoprukbN.js";import{_ as Q}from"./SakuraPageHeader-DoEE9N9B.js";import"./SakuraDate.vue_vue_type_script_setup_true_lang-BwxUk5J0.js";const U={class:"post-collapse px-10 lt-sm:px-5"},X={w:"full",text:"center",class:"yun-text-light",p:"2"},Z={class:"post-collapse-action",text:"center"},A={key:0,"i-ri-sort-desc":""},K={key:1,"i-ri-sort-asc":""},j=["id"],ee={key:0,class:"post-meta absolute left--40"},te={key:0,class:"post-time",font:"mono",opacity:"80"},se={class:"text-$st-c-text"},ae={key:1,class:"post-meta"},oe={key:0,class:"post-time text-$st-c-timeline-text-color",font:"mono",opacity:"80"},ne={class:"post-title","inline-flex":"","items-center":"",font:"serif black"},ie=B({__name:"SakuraTimeLine",props:{posts:{}},setup(Y){const y=Y,{t:m}=D(),c=x(!0),p=x([]),h=x({}),s=x({}),f=x({});E(()=>y.posts,()=>{s.value={},p.value=[],h.value={},y.posts.forEach(t=>{if(!(t.hide&&t.hide!=="index")&&t.date){const e=Number.parseInt(b(t.date,"YYYY")),n=Number.parseInt(b(t.date,"MM"));s.value[e]||(p.value.push(e),h.value[e]=[],s.value[e]={}),s.value[e][n]||(h.value[e].push(n),s.value[e][n]=[],s.value[e][n].push(t)),s.value[e][n].push(t)}}),f.value=JSON.parse(JSON.stringify(s.value)),Object.keys(s.value).forEach(t=>{Object.keys(s.value[t]).forEach(e=>{s.value[t][e].length>1&&(s.value[t][e]=[s.value[t][e][0]])})})},{immediate:!0});const L=O(()=>{const e=[...p.value].sort((n,o)=>o-n);return c.value?e:e.reverse()});function $(t){const n=[...h.value[t]].sort((o,r)=>r-o);return c.value?n:n.reverse()}function w(t,e){s.value[t][e]=[...f.value[t][e]]}return(t,e)=>{const n=V("RouterLink");return a(),i("div",U,[v("div",X,d(l(m)("counter.archives",t.posts.length)),1),v("div",Z,[v("button",{class:"yun-icon-btn shadow hover:shadow-md",onClick:e[0]||(e[0]=o=>c.value=!c.value)},[c.value?(a(),i("div",A)):(a(),i("div",K))])]),(a(!0),i(C,null,M(L.value,o=>(a(),i("div",{key:o,class:"ml-1/3"},[v("h2",{id:`#archive-year-${o}`,class:"archive-year ml--8",text:"2xl"},d(o)+"年 ",9,j),(a(!0),i(C,null,M($(o),r=>(a(),N(F,{key:r,name:"timeline",tag:"ul",class:"relative p-0",onMouseenter:u=>w(o,r)},{default:_(()=>[(a(!0),i(C,null,M(l(P)(s.value[o][r],c.value),(u,k)=>(a(),i("li",{key:`post-${o}-${r}-${k}`,class:"post-item relative"},[v("header",{class:R(["post-header",[k===0?"circle-indicator":"hover-indicator",k!==s.value[o][r].length&&"h-$st-c-timeline-height"]]),flex:"","items-center":""},[k===0?(a(),i("div",ee,[u.date?(a(),i("time",te,d(l(b)(u.date,"MM"))+"月 ",1)):S("v-if",!0),v("span",se," ("+d(f.value[o][r].length)+" 篇文章) ",1)])):S("v-if",!0),k!==0?(a(),i("div",ae,[u.date?(a(),i("time",oe,d(l(b)(u.date,"DD"))+"日 ",1)):S("v-if",!0),v("h2",ne,[g(n,{to:u.path||"",class:"post-title-link text-$st-c-text hover:text-$st-c-accent"},{default:_(()=>[T(d(u.title),1)]),_:2},1032,["to"])])])):S("v-if",!0)],2)]))),128))]),_:2},1032,["onMouseenter"]))),128))]))),128))])}}}),ue=B({__name:"archives",setup(Y){const{t:y}=D(),m=I(),c=J(m),p=z();return W([q({"@type":"CollectionPage"})]),(h,s)=>{const f=Q,L=ie,$=V("RouterView"),w=H;return a(),N(w,{class:"relative"},{default:_(()=>[g($,null,{default:_(({Component:t})=>[(a(),N(G(t),null,{"main-header":_(()=>[g(f,{title:l(c)||l(y)("menu.archives"),icon:l(m).icon||"i-ri-archive-line",color:l(m).color},null,8,["title","icon","color"])]),"main-content":_(()=>[g(L,{posts:l(p).postList},null,8,["posts"]),g($)]),_:2},1024))]),_:1})]),_:1})}}});export{ue as default};
